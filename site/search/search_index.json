{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Qu'est-ce que HDM ? Health data metrics (HDM) est un outil d\u00e9velopp\u00e9 par la Data Factory de l'Institut Curie . Le but Son but est de pouvoir calculer des m\u00e9triques de qualit\u00e9 sur de la donn\u00e9e m\u00e9dicale et son stockage dans les entrep\u00f4ts de donn\u00e9es. Le but premier est de pouvoir am\u00e9liorer et monitorer la qualit\u00e9 des donn\u00e9es de nos entrep\u00f4ts de donn\u00e9e de sant\u00e9. Pour ce faire nous avons d\u00e9velopp\u00e9 les fonctionnalit\u00e9s suivantes : Calculer des m\u00e9triques sur les donn\u00e9es de nos entrep\u00f4ts. Mettre en place des r\u00e8gles pour pouvoir appliquer des contraintes op\u00e9rationnelles/m\u00e9tiers sur les bases de donn\u00e9es en lien avec les m\u00e9triques calcul\u00e9es. D\u00e9tecter les ruptures et r\u00e9gressions dans la structure de la base de donn\u00e9es ou dans les donn\u00e9es elles-m\u00eames en g\u00e9n\u00e9rant des alertes gr\u00e2ce \u00e0 des r\u00e8gles m\u00e9tiers. Permettre de centraliser les contraintes et cr\u00e9er un HUB unifi\u00e9 pour g\u00e9rer la qualit\u00e9 de la donn\u00e9e afin de livrer des donn\u00e9es de la meilleure qualit\u00e9 possible aux m\u00e9decins et chercheurs. Cr\u00e9er des dashboards sur les m\u00e9triques pour pouvoir les visualiser et les explorer . Les principes de base Il existe une relation hi\u00e9rarchique dans la fa\u00e7on dont HDM fonctionne : Premi\u00e8rement, nous avons des bases de donn\u00e9es \u00e0 sur lesquelles nous allons calculer des m\u00e9triques Ces m\u00e9triques peuvent servir diff\u00e9rents buts et sont calcul\u00e9es gr\u00e2ce \u00e0 des M\u00e9triques Packs qui sont des mini programmes autonomes qui vont se charger de les calculer puis de les ins\u00e9rer dans une base de donn\u00e9es de m\u00e9trique . Ensuite nous avons les Rules Packs dont le but est de pouvoir exploiter les m\u00e9triques calcul\u00e9es pr\u00e9c\u00e9demment afin de g\u00e9n\u00e9rer des alertes que l'utilisateur pourra consulter. De la m\u00eame mani\u00e8re que pour les m\u00e9triques Packs, les Rule Packs fonctionnent \u00e9galement comme des mini programmes autonomes qui vont se charger cette fois de g\u00e9n\u00e9rer des r\u00e8gles bas\u00e9es sur les m\u00e9triques et de g\u00e9n\u00e9rer des alertes si jamais ces r\u00e8gles ne sont pas respect\u00e9es . L'architecture Fonctionnelle HDM fonctionne en articulation de plusieurs outils et technologies que nous allons voir dans la suite : Logiciel Containerized Version Usage url Elasticsearch Yes 7.10.0 Permet de stocker les m\u00e9triques sous forme de documents pour la construction des dashboards https://www.elastic.co/fr/products/elasticsearch Kibana Yes 7.10.0 Permet de r\u00e9aliser des tableaux de visualisations interactives pour l'analyse exploratoire des m\u00e9triques https://www.elastic.co/fr/products/kibana Python Yes 3.6.8 Permet d'ex\u00e9cuter les scripts pour le calcul des m\u00e9triques et la g\u00e9n\u00e9ration des alertes https://www.python.org/download/releases/3.0/ Apache Yes php:7.4.5-apache Serveur Web avec PHP 7 pour l'affichage de la web-Application https://hub.docker.com/ MySQL Yes 8.0.16 Base de donn\u00e9es relationnelle qui permet de stocker les m\u00e9triques, les r\u00e8gles et les alertes. https://www.mysql.com/fr/ Airflow Yes 2.1.0 Orchestrateur de T\u00e2ches. https://airflow.apache.org/ Les composants Bases de donn\u00e9es Cet outil int\u00e8gre 3 bases de donn\u00e9es : Une base MySQL pour stocker les m\u00e9triques sous format SQL. Une base MySQL pour stocker les donn\u00e9es applicatives. (conf , param\u00e8tres, logs etc...) Une base Elasticsearch pour stocker les m\u00e9triques sous format NO-SQL. Modules Front-end L'outil de front-end fonctionne de fa\u00e7on modulaire, il existe les modules suivants : Explorer (Dashboarding pour explorer les m\u00e9triques) Rule editor (Permet d'\u00e9diter les r\u00e8gles de coh\u00e9rence directement dans l'interface sans lignes de codes) Alerts (Permet d'afficher les alertes remont\u00e9s par les Rule Packs) Admin (Permet de g\u00e9rer l'administration des MP/RP et leur configuration) Dashboards Cet outil peut \u00eatre utilis\u00e9 avec les outils suivants : Kibana qui permet de cr\u00e9er des vues \u00e0 partir des documents dans les bases NO-SQL Elasticsearch. Redash qui permet de cr\u00e9er des vues \u00e0 partir des tables de m\u00e9triques SQL MySQL. Orchestrateur & Jobs Afin de monitorer l'ex\u00e9cution des t\u00e2ches de calcul de m\u00e9triques, de r\u00e8gles et d'alertes, nous utilisons Airflow, \u00e0 travers la d\u00e9finition d'un DAG appel\u00e9 : hdm-pipeline . M\u00e9triques et r\u00e8gles Comment sont d\u00e9fini et calcul\u00e9s les modules de m\u00e9triques et de r\u00e8gles ? Dans HDM il existe ce qu'on appelle des \"PACK\", les packs sont des mini-modules qui se chargent de calculer soit des m\u00e9triques, soit des r\u00e8gles de coh\u00e9rences de donn\u00e9es. Dans la version actuelle de HDM il n'existe qu'un seul pack de m\u00e9triques mais il est possible d'en rajouter d'autres par la suite sans avoir \u00e0 modifier l'applicatif. Fonctionnement des \"MetricPacks\" (MP) Les m\u00e9triques packs contiennent un fichier .sh qui contient la ligne d'ex\u00e9cution du MP, il est \u00e0 la charge du programmeur du MP de faire toutes les v\u00e9rifications de d\u00e9pendances logicielles avant d'ex\u00e9cuter son programme. Le metricPack peut \u00e9galement contenir un fichier .ndjson contenant les visualisation & dashboards Kibana qui sont li\u00e9s aux donn\u00e9es de m\u00e9triques que produisent son MP. Fonctionnement des \"RulePacks\" (RP) Les rules packs contiennent un fichier .sh qui contient la ligne d'ex\u00e9cution du RP, il est \u00e0 la charge du programmeur du MP de faire toutes les v\u00e9rifications de d\u00e9pendances logicielles avant d'ex\u00e9cuter son programme. Les rules packs s'ex\u00e9cutent sur les donn\u00e9es des MP et ajoutes des alertes dans la table d'alerte de HDM. Configuration & Orchestration La configuration de l'applicatif HDM est interne \u00e0 l'applicatif lui-m\u00eame, il existe les configurations suivantes : Configuration LDAP : Permet de se connecter au serveur LDAP, g\u00e8re l'authentification des utilisateurs et la gestion de leurs droits Configuration Application : Quels dashboards Kibana afficher dans quels modules etc... Configuration Packs : Connexion au r\u00e9pertoire de Packs (Nexus) Configuration g\u00e9n\u00e9rale des packs Chaque MetricPack & RulePack peux poss\u00e9der sa configuration propre. Elle est stock\u00e9e en base64 dans la base de donn\u00e9es applicative. Chaque MP & RP peut \u00e9galement poss\u00e9der sa configuration propre par base de donn\u00e9es scann\u00e9e et peut donc adapter son fonctionnement \u00e0 la base de donn\u00e9es cible si besoin. Si cette configuration existe, elle sera charg\u00e9e en lieu et place de la configuration du MP/RP parente. L'orchestration est effectu\u00e9e par un DAG (Directed Acyclic Graph) Airflow qui se chargera de charger les MP/RP puis, de charger leur configuration, et enfin les ex\u00e9cutera sur chaque base de donn\u00e9es. Les m\u00e9triques de qualit\u00e9s de la donn\u00e9e Les niveaux de m\u00e9triques Afin d'\u00e9valuer de fa\u00e7on correcte la qualit\u00e9 des donn\u00e9es, il est bon de d\u00e9finir des p\u00e9rim\u00e8tres de calcul de ces m\u00e9triques. Nous avons d\u00e9fini 6 niveaux hi\u00e9rarchiques de m\u00e9triques; Il est important de ne pas m\u00e9langer les niveaux de m\u00e9triques, et de comparer les m\u00e9triques entres-elles sur le m\u00eame niveau. Le niveau 0 : Le niveau 0 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle de toutes les versions d'une base de donn\u00e9es. Le niveau 1 : Le niveau 1 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle d'une version donn\u00e9e d'une base de donn\u00e9es. Le niveau 2 : Le niveau 2 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle d'une table, d'une version donn\u00e9e, d'une base de donn\u00e9es. Le niveau 3 : Le niveau 3 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle d'une colonne ind\u00e9pendamment de son type (exemple : nombres de valeurs manquantes/valeurs NULL). Le niveau 4 : Le niveau 4 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle d'une colonne en prenant en compte son type de donn\u00e9e (Num\u00e9rique, textuelle, cat\u00e9gorique, continue, date, id etc. ...). Le niveau 5 : Le niveau 5 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle de variables cat\u00e9goriques : (fr\u00e9quence, valeur) Sch\u00e9ma de repr\u00e9sentation des diff\u00e9rents niveaux de calcul de m\u00e9triques possible. Les r\u00e8gles & alertes Les r\u00e8gles Bas\u00e9 sur les m\u00e9triques calcul\u00e9es p\u00e9riodiquement, l'application permet d'assurer un suivi passif (sans intervention humaine) et dynamique (s'adapte aux changements) de la qualit\u00e9 de la donn\u00e9e, \u00e0 l'aide de l'outil d'impl\u00e9mentation de r\u00e8gles d'alertes afin de remonter le plus efficacement les anomalies dans la base de donn\u00e9es. Affichage de l'interface graphique de l'\u00e9diteur de r\u00e8gles. Les Alertes Les alertes seront pr\u00e9sent\u00e9s sous forme de liste simple et organis\u00e9s par base de donn\u00e9es, table ou colonnes. Affichage de la table des alertes. La visualisation et l'exploration La visualisation des m\u00e9triques et leur exploration est une phase importante afin de construire les r\u00e8gles les plus pertinentes possibles. Un outil est \u00e0 disposition appel\u00e9 Kibana, bas\u00e9 sur la base de donn\u00e9es Elasticsearch. Les dashboard permettrons de visualiser et d'interagir simplement avec les m\u00e9triques afin de pouvoir d\u00e9tecter les valeurs aberrantes facilement, et de pouvoir faire remonter ces anomalies en alerte gr\u00e2ce \u00e0 l'\u00e9diteur de r\u00e8gles. Affichage de l'interface graphique de dashboard kibana.","title":"Home"},{"location":"#quest-ce-que-hdm","text":"Health data metrics (HDM) est un outil d\u00e9velopp\u00e9 par la Data Factory de l'Institut Curie .","title":"Qu'est-ce que HDM ?"},{"location":"#le-but","text":"Son but est de pouvoir calculer des m\u00e9triques de qualit\u00e9 sur de la donn\u00e9e m\u00e9dicale et son stockage dans les entrep\u00f4ts de donn\u00e9es. Le but premier est de pouvoir am\u00e9liorer et monitorer la qualit\u00e9 des donn\u00e9es de nos entrep\u00f4ts de donn\u00e9e de sant\u00e9. Pour ce faire nous avons d\u00e9velopp\u00e9 les fonctionnalit\u00e9s suivantes : Calculer des m\u00e9triques sur les donn\u00e9es de nos entrep\u00f4ts. Mettre en place des r\u00e8gles pour pouvoir appliquer des contraintes op\u00e9rationnelles/m\u00e9tiers sur les bases de donn\u00e9es en lien avec les m\u00e9triques calcul\u00e9es. D\u00e9tecter les ruptures et r\u00e9gressions dans la structure de la base de donn\u00e9es ou dans les donn\u00e9es elles-m\u00eames en g\u00e9n\u00e9rant des alertes gr\u00e2ce \u00e0 des r\u00e8gles m\u00e9tiers. Permettre de centraliser les contraintes et cr\u00e9er un HUB unifi\u00e9 pour g\u00e9rer la qualit\u00e9 de la donn\u00e9e afin de livrer des donn\u00e9es de la meilleure qualit\u00e9 possible aux m\u00e9decins et chercheurs. Cr\u00e9er des dashboards sur les m\u00e9triques pour pouvoir les visualiser et les explorer .","title":"Le but"},{"location":"#les-principes-de-base","text":"Il existe une relation hi\u00e9rarchique dans la fa\u00e7on dont HDM fonctionne : Premi\u00e8rement, nous avons des bases de donn\u00e9es \u00e0 sur lesquelles nous allons calculer des m\u00e9triques Ces m\u00e9triques peuvent servir diff\u00e9rents buts et sont calcul\u00e9es gr\u00e2ce \u00e0 des M\u00e9triques Packs qui sont des mini programmes autonomes qui vont se charger de les calculer puis de les ins\u00e9rer dans une base de donn\u00e9es de m\u00e9trique . Ensuite nous avons les Rules Packs dont le but est de pouvoir exploiter les m\u00e9triques calcul\u00e9es pr\u00e9c\u00e9demment afin de g\u00e9n\u00e9rer des alertes que l'utilisateur pourra consulter. De la m\u00eame mani\u00e8re que pour les m\u00e9triques Packs, les Rule Packs fonctionnent \u00e9galement comme des mini programmes autonomes qui vont se charger cette fois de g\u00e9n\u00e9rer des r\u00e8gles bas\u00e9es sur les m\u00e9triques et de g\u00e9n\u00e9rer des alertes si jamais ces r\u00e8gles ne sont pas respect\u00e9es .","title":"Les principes de base"},{"location":"#larchitecture-fonctionnelle","text":"HDM fonctionne en articulation de plusieurs outils et technologies que nous allons voir dans la suite : Logiciel Containerized Version Usage url Elasticsearch Yes 7.10.0 Permet de stocker les m\u00e9triques sous forme de documents pour la construction des dashboards https://www.elastic.co/fr/products/elasticsearch Kibana Yes 7.10.0 Permet de r\u00e9aliser des tableaux de visualisations interactives pour l'analyse exploratoire des m\u00e9triques https://www.elastic.co/fr/products/kibana Python Yes 3.6.8 Permet d'ex\u00e9cuter les scripts pour le calcul des m\u00e9triques et la g\u00e9n\u00e9ration des alertes https://www.python.org/download/releases/3.0/ Apache Yes php:7.4.5-apache Serveur Web avec PHP 7 pour l'affichage de la web-Application https://hub.docker.com/ MySQL Yes 8.0.16 Base de donn\u00e9es relationnelle qui permet de stocker les m\u00e9triques, les r\u00e8gles et les alertes. https://www.mysql.com/fr/ Airflow Yes 2.1.0 Orchestrateur de T\u00e2ches. https://airflow.apache.org/","title":"L'architecture Fonctionnelle"},{"location":"#les-composants","text":"","title":"Les composants"},{"location":"#bases-de-donnees","text":"Cet outil int\u00e8gre 3 bases de donn\u00e9es : Une base MySQL pour stocker les m\u00e9triques sous format SQL. Une base MySQL pour stocker les donn\u00e9es applicatives. (conf , param\u00e8tres, logs etc...) Une base Elasticsearch pour stocker les m\u00e9triques sous format NO-SQL.","title":"Bases de donn\u00e9es"},{"location":"#modules-front-end","text":"L'outil de front-end fonctionne de fa\u00e7on modulaire, il existe les modules suivants : Explorer (Dashboarding pour explorer les m\u00e9triques) Rule editor (Permet d'\u00e9diter les r\u00e8gles de coh\u00e9rence directement dans l'interface sans lignes de codes) Alerts (Permet d'afficher les alertes remont\u00e9s par les Rule Packs) Admin (Permet de g\u00e9rer l'administration des MP/RP et leur configuration)","title":"Modules Front-end"},{"location":"#dashboards","text":"Cet outil peut \u00eatre utilis\u00e9 avec les outils suivants : Kibana qui permet de cr\u00e9er des vues \u00e0 partir des documents dans les bases NO-SQL Elasticsearch. Redash qui permet de cr\u00e9er des vues \u00e0 partir des tables de m\u00e9triques SQL MySQL.","title":"Dashboards"},{"location":"#orchestrateur-jobs","text":"Afin de monitorer l'ex\u00e9cution des t\u00e2ches de calcul de m\u00e9triques, de r\u00e8gles et d'alertes, nous utilisons Airflow, \u00e0 travers la d\u00e9finition d'un DAG appel\u00e9 : hdm-pipeline .","title":"Orchestrateur &amp; Jobs"},{"location":"#metriques-et-regles","text":"Comment sont d\u00e9fini et calcul\u00e9s les modules de m\u00e9triques et de r\u00e8gles ? Dans HDM il existe ce qu'on appelle des \"PACK\", les packs sont des mini-modules qui se chargent de calculer soit des m\u00e9triques, soit des r\u00e8gles de coh\u00e9rences de donn\u00e9es. Dans la version actuelle de HDM il n'existe qu'un seul pack de m\u00e9triques mais il est possible d'en rajouter d'autres par la suite sans avoir \u00e0 modifier l'applicatif.","title":"M\u00e9triques et r\u00e8gles"},{"location":"#fonctionnement-des-metricpacks-mp","text":"Les m\u00e9triques packs contiennent un fichier .sh qui contient la ligne d'ex\u00e9cution du MP, il est \u00e0 la charge du programmeur du MP de faire toutes les v\u00e9rifications de d\u00e9pendances logicielles avant d'ex\u00e9cuter son programme. Le metricPack peut \u00e9galement contenir un fichier .ndjson contenant les visualisation & dashboards Kibana qui sont li\u00e9s aux donn\u00e9es de m\u00e9triques que produisent son MP.","title":"Fonctionnement des \"MetricPacks\" (MP)"},{"location":"#fonctionnement-des-rulepacks-rp","text":"Les rules packs contiennent un fichier .sh qui contient la ligne d'ex\u00e9cution du RP, il est \u00e0 la charge du programmeur du MP de faire toutes les v\u00e9rifications de d\u00e9pendances logicielles avant d'ex\u00e9cuter son programme. Les rules packs s'ex\u00e9cutent sur les donn\u00e9es des MP et ajoutes des alertes dans la table d'alerte de HDM.","title":"Fonctionnement des \"RulePacks\" (RP)"},{"location":"#configuration-orchestration","text":"La configuration de l'applicatif HDM est interne \u00e0 l'applicatif lui-m\u00eame, il existe les configurations suivantes : Configuration LDAP : Permet de se connecter au serveur LDAP, g\u00e8re l'authentification des utilisateurs et la gestion de leurs droits Configuration Application : Quels dashboards Kibana afficher dans quels modules etc... Configuration Packs : Connexion au r\u00e9pertoire de Packs (Nexus) Configuration g\u00e9n\u00e9rale des packs Chaque MetricPack & RulePack peux poss\u00e9der sa configuration propre. Elle est stock\u00e9e en base64 dans la base de donn\u00e9es applicative. Chaque MP & RP peut \u00e9galement poss\u00e9der sa configuration propre par base de donn\u00e9es scann\u00e9e et peut donc adapter son fonctionnement \u00e0 la base de donn\u00e9es cible si besoin. Si cette configuration existe, elle sera charg\u00e9e en lieu et place de la configuration du MP/RP parente. L'orchestration est effectu\u00e9e par un DAG (Directed Acyclic Graph) Airflow qui se chargera de charger les MP/RP puis, de charger leur configuration, et enfin les ex\u00e9cutera sur chaque base de donn\u00e9es.","title":"Configuration &amp; Orchestration"},{"location":"#les-metriques-de-qualites-de-la-donnee","text":"","title":"Les m\u00e9triques de qualit\u00e9s de la donn\u00e9e"},{"location":"#les-niveaux-de-metriques","text":"Afin d'\u00e9valuer de fa\u00e7on correcte la qualit\u00e9 des donn\u00e9es, il est bon de d\u00e9finir des p\u00e9rim\u00e8tres de calcul de ces m\u00e9triques. Nous avons d\u00e9fini 6 niveaux hi\u00e9rarchiques de m\u00e9triques; Il est important de ne pas m\u00e9langer les niveaux de m\u00e9triques, et de comparer les m\u00e9triques entres-elles sur le m\u00eame niveau. Le niveau 0 : Le niveau 0 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle de toutes les versions d'une base de donn\u00e9es. Le niveau 1 : Le niveau 1 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle d'une version donn\u00e9e d'une base de donn\u00e9es. Le niveau 2 : Le niveau 2 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle d'une table, d'une version donn\u00e9e, d'une base de donn\u00e9es. Le niveau 3 : Le niveau 3 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle d'une colonne ind\u00e9pendamment de son type (exemple : nombres de valeurs manquantes/valeurs NULL). Le niveau 4 : Le niveau 4 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle d'une colonne en prenant en compte son type de donn\u00e9e (Num\u00e9rique, textuelle, cat\u00e9gorique, continue, date, id etc. ...). Le niveau 5 : Le niveau 5 permet de calculer des m\u00e9triques \u00e0 l'\u00e9chelle de variables cat\u00e9goriques : (fr\u00e9quence, valeur) Sch\u00e9ma de repr\u00e9sentation des diff\u00e9rents niveaux de calcul de m\u00e9triques possible.","title":"Les niveaux de m\u00e9triques"},{"location":"#les-regles-alertes","text":"","title":"Les r\u00e8gles &amp; alertes"},{"location":"#les-regles","text":"Bas\u00e9 sur les m\u00e9triques calcul\u00e9es p\u00e9riodiquement, l'application permet d'assurer un suivi passif (sans intervention humaine) et dynamique (s'adapte aux changements) de la qualit\u00e9 de la donn\u00e9e, \u00e0 l'aide de l'outil d'impl\u00e9mentation de r\u00e8gles d'alertes afin de remonter le plus efficacement les anomalies dans la base de donn\u00e9es. Affichage de l'interface graphique de l'\u00e9diteur de r\u00e8gles.","title":"Les r\u00e8gles"},{"location":"#les-alertes","text":"Les alertes seront pr\u00e9sent\u00e9s sous forme de liste simple et organis\u00e9s par base de donn\u00e9es, table ou colonnes. Affichage de la table des alertes.","title":"Les Alertes"},{"location":"#la-visualisation-et-lexploration","text":"La visualisation des m\u00e9triques et leur exploration est une phase importante afin de construire les r\u00e8gles les plus pertinentes possibles. Un outil est \u00e0 disposition appel\u00e9 Kibana, bas\u00e9 sur la base de donn\u00e9es Elasticsearch. Les dashboard permettrons de visualiser et d'interagir simplement avec les m\u00e9triques afin de pouvoir d\u00e9tecter les valeurs aberrantes facilement, et de pouvoir faire remonter ces anomalies en alerte gr\u00e2ce \u00e0 l'\u00e9diteur de r\u00e8gles. Affichage de l'interface graphique de dashboard kibana.","title":"La visualisation et l'exploration"}]}